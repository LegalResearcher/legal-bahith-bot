<!DOCTYPE html>
<html lang="ar">
<head>
  <meta charset="UTF-8" />
  <title>الباحث القانوني</title>
</head>
<body style="text-align:center; padding:50px; direction:rtl;">
  <h2>مرحبا بك في البوت القانوني</h2>
  <textarea id="question" placeholder="اكتب سؤالك هنا..." rows="5" cols="40"></textarea><br><br>
  <button onclick="sendQuestion()">أرسل السؤال</button>
  <div id="answer" style="margin-top:20px; font-weight:bold;"></div>

  <script>
    async function sendQuestion() {
      const question = document.getElementById("question").value;
      const answerDiv = document.getElementById("answer");

      if (!question.trim()) {
        answerDiv.textContent = "⚠️ الرجاء كتابة سؤال أولاً.";
        return;
      }

      answerDiv.textContent = "⏳ جاري المعالجة...";
      try {
        const response = await fetch('/ask', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json'
          },
          body: JSON.stringify({ question })
        });

        const data = await response.json();
        answerDiv.textContent = data.answer;
      } catch (error) {
        answerDiv.textContent = "❌ حدث خطأ أثناء المعالجة.";
      }
    }
  </script>
</body>
</html>
